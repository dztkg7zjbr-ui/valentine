<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Valentine for Emma</title>

<style>
  :root{
    --hot:#ff4d6d;
  }

  body{
    margin:0;
    font-family: Arial, sans-serif;
    height:100vh;
    overflow:hidden;
    display:flex;
    justify-content:center;
    align-items:center;
    background:#000; /* only shows if images fail to load */
  }

  /* =========================
     FILM STRIP BACKGROUND
     2 rows x 8 columns visible
     Seamless loop sliding RIGHT
     ========================= */
  #film{
    position:fixed;
    inset:0;
    z-index:-1;
    overflow:hidden;
    background:#000; /* only shows if images fail */
  }

  .track{
    position:absolute;
    left:0;
    top:0;
    height:100%;
    width:200%;                 /* two identical strips side-by-side */
    display:flex;
    animation: scrollRight 28s linear infinite;
    will-change: transform;
  }

  /* Each strip is full width of the viewport */
  .strip{
    width:50%;                  /* 50% of track (since track is 200%) */
    height:100%;
    display:grid;
    grid-template-columns: repeat(8, 1fr);
    grid-template-rows: repeat(2, 1fr);
    gap:10px;
    padding:10px;
    box-sizing:border-box;
  }

  .strip img{
    width:100%;
    height:100%;
    object-fit:cover;
    border-radius:14px;
    /* Clear photos: no blur, no tint, no darkening */
    filter:none;
  }

  /* Move the whole track RIGHT by half its width (one strip),
     so the second strip takes over seamlessly. */
  @keyframes scrollRight{
    0%   { transform: translateX(-50%); }
    100% { transform: translateX(0%); }
  }

  /* =========================
     UI CARD + BUTTONS
     ========================= */
  .card{
    background: rgba(255,255,255,.92);
    padding: 42px 46px;
    border-radius: 22px;
    text-align:center;
    box-shadow: 0 14px 30px rgba(0,0,0,.35);
    max-width: 560px;
    width: calc(100% - 48px);
    backdrop-filter: blur(4px);
  }

  h1{
    margin:0 0 12px 0;
    color: var(--hot);
    font-size: clamp(26px, 4vw, 34px);
  }

  p{
    margin:0 0 18px 0;
    color:#333;
    font-size:16px;
  }

  button{
    padding: 12px 24px;
    border: none;
    border-radius: 999px;
    font-size: 18px;
    cursor: pointer;
    user-select:none;
    transition: transform .08s ease;
  }
  button:active{ transform: scale(.98); }

  #yes{
    background: var(--hot);
    color: white;
    box-shadow: 0 10px 18px rgba(255,77,109,.25);
  }

  /* UPDATED: let JS place it next to YES on load */
  #no{
    background:#d9d9d9;
    color:#333;
    position: fixed;
    z-index: 10;
  }

  /* =========================
     CELEBRATION OVERLAY
     ========================= */
  .celebrate{
    display:none;
    position:fixed;
    inset:0;
    z-index:50;
    background: radial-gradient(circle, #ffdde1, #ee9ca7);
    color:#fff;
    justify-content:center;
    align-items:center;
    flex-direction:column;
    text-align:center;
    padding: 24px;
    box-sizing:border-box;
  }

  .celebrate h2{
    margin:0;
    font-size: clamp(34px, 6vw, 56px);
    text-shadow: 0 8px 22px rgba(0,0,0,.25);
  }

  .celebrate p{
    margin: 10px 0 0 0;
    color: rgba(255,255,255,.95);
    font-size: clamp(16px, 2.6vw, 20px);
    text-shadow: 0 6px 18px rgba(0,0,0,.18);
  }

  #countdownText{
    margin-top:14px;
    font-size:18px;
    font-weight:600;
    opacity:.95;
    min-height:24px;
    text-shadow:0 8px 18px rgba(0,0,0,.18);
  }

  #ctaSlot{ margin-top: 8px; }

 /* =========================
   COUPLE ROSES ANIMATION (NO OVERLAP)
   ========================= */
.coupleStage{
  width:min(820px, 94vw);
  margin: 12px auto 4px;
  border-radius: 18px;
  background: rgba(255,255,255,.14);
  border: 1px solid rgba(255,255,255,.22);
  box-shadow: 0 14px 30px rgba(0,0,0,.18);
  overflow:hidden;
}

.coupleArt{ width:100%; height:auto; display:block; }

/* start state */
#celebrate .boy{ opacity:1; }
#celebrate .girl{ opacity:1; }
#celebrate .hearts{ opacity:0; transform: translateY(10px) scale(.95); transform-origin:center; }

/* Walk boy in from left to near Emma */
#celebrate.playAnim .boy{
  animation: boyWalkAcross 1100ms cubic-bezier(.2,.8,.2,1) forwards;
}

/* Bouquet ‚Äúhandoff‚Äù moment: bouquet detaches visually by moving slightly right */
#celebrate.playAnim .boy .bouquet{
  animation: bouquetHandoff 520ms cubic-bezier(.2,.8,.2,1) 980ms forwards;
  transform-origin: 20px 90px;
}

/* Hearts appear after handoff */
#celebrate.playAnim .hearts{
  animation: heartsPop 900ms ease-in-out 1120ms forwards;
}

@keyframes boyWalkAcross{
  0%   { transform: translate(-260px, 40px); }
  100% { transform: translate(200px, 40px); } /* stops left of Emma */
}

@keyframes bouquetHandoff{
  0%   { transform: translate(288px,50px) scale(1); opacity:1; }
  100% { transform: translate(450px,50px) scale(1.03); opacity:1; } /* moves toward Emma */
}

@keyframes heartsPop{
  0%   { opacity:0; transform: translateY(10px) scale(.95); }
  35%  { opacity:1; }
  100% { opacity:1; transform: translateY(-10px) scale(1); }
}

@media (prefers-reduced-motion: reduce){
  #celebrate.playAnim .boy,
  #celebrate.playAnim .boy .bouquet,
  #celebrate.playAnim .hearts{
    animation: none !important;
    transform: none !important;
    opacity: 1 !important;
  }
}

  /* =========================
     PARTICLES
     ========================= */
  #particles{
    position:fixed;
    inset:0;
    pointer-events:none;
    overflow:hidden;
    z-index:60;
  }

  .confetti{
    position:absolute;
    width:10px;
    height:16px;
    border-radius:3px;
    opacity:.95;
    top:-5%;
    animation: fall linear forwards;
  }

  .floater{
    position:absolute;
    font-size:28px;
    opacity:.95;
    animation: floatUp linear forwards;
    filter: drop-shadow(0 10px 12px rgba(0,0,0,.15));
  }

  @keyframes fall{
    0%   { transform: translateY(0) rotate(0deg); }
    100% { transform: translateY(120vh) rotate(720deg); }
  }

  @keyframes floatUp{
    0%   { transform: translateY(0); opacity:0; }
    12%  { opacity:.95; }
    100% { transform: translateY(-220px); opacity:0; }
  }
</style>
</head>

<body>

<!-- Film wheel / strip background -->
<div id="film">
  <div class="track">
    <!-- Strip A -->
    <div class="strip">
      <img src="photo1.jpg"  alt="">
      <img src="photo2.jpg"  alt="">
      <img src="photo3.jpg"  alt="">
      <img src="photo4.jpg"  alt="">
      <img src="photo5.jpg"  alt="">
      <img src="photo6.jpg"  alt="">
      <img src="photo7.jpg"  alt="">
      <img src="photo8.jpg"  alt="">

      <img src="photo9.jpg"  alt="">
      <img src="photo10.jpg" alt="">
      <img src="photo11.jpg" alt="">
      <img src="photo12.jpg" alt="">
      <img src="photo1.jpg"  alt="">
      <img src="photo2.jpg"  alt="">
      <img src="photo3.jpg"  alt="">
      <img src="photo4.jpg"  alt="">
    </div>

    <!-- Strip B (identical) -->
    <div class="strip">
      <img src="photo1.jpg"  alt="">
      <img src="photo2.jpg"  alt="">
      <img src="photo3.jpg"  alt="">
      <img src="photo4.jpg"  alt="">
      <img src="photo5.jpg"  alt="">
      <img src="photo6.jpg"  alt="">
      <img src="photo7.jpg"  alt="">
      <img src="photo8.jpg"  alt="">

      <img src="photo9.jpg"  alt="">
      <img src="photo10.jpg" alt="">
      <img src="photo11.jpg" alt="">
      <img src="photo12.jpg" alt="">
      <img src="photo1.jpg"  alt="">
      <img src="photo2.jpg"  alt="">
      <img src="photo3.jpg"  alt="">
      <img src="photo4.jpg"  alt="">
    </div>
  </div>
</div>

<!-- Main ask -->
<div class="card">
  <h1>Emma, will you be my Valentine? üíò</h1>
  <p>Choose wisely üòå</p>
  <button id="yes">Yes</button>
</div>

<button id="no">No</button>

<!-- Celebration -->
<div class="celebrate" id="celebrate">
  <h2>üéâ THANKS POOKIE!!! üéâ</h2>
  <p>I love you üíñüåπ</p>

  <!-- Cute couple animation -->
  <div class="coupleStage" aria-hidden="true">
  <svg class="coupleArt" viewBox="0 0 900 320" preserveAspectRatio="xMidYMid meet">
    <!-- Ground -->

    <!-- Girl (Emma) stays on the RIGHT -->
    <g class="girl" transform="translate(640,40)">
      <!-- legs -->
      <rect x="132" y="210" width="26" height="64" rx="10" fill="#f2c9b8"/>
      <rect x="172" y="210" width="26" height="64" rx="10" fill="#f2c9b8"/>

      <!-- shoes -->
      <rect x="126" y="268" width="38" height="14" rx="7" fill="#0b0b0b"/>
      <rect x="166" y="268" width="38" height="14" rx="7" fill="#0b0b0b"/>

      <!-- dress body (same footprint as your suit: 96w x ~102h) -->
      <path d="M100 240 Q166 125 232 240" fill="#ff6aa6"/>
      <rect x="118" y="118" width="96" height="102" rx="22" fill="#ff6aa6"/>

      <!-- arms (same layout as your suit arms for consistency) -->
      <rect x="96" y="134" width="30" height="18" rx="9" fill="#ff6aa6"/>
      <rect x="206" y="134" width="30" height="18" rx="9" fill="#ff6aa6"/>

      <!-- right forearm (ready to receive roses) -->
      <rect x="65" y="144" width="46" height="16" rx="8" fill="#ff6aa6"/>
      <circle cx="57" cy="152" r="10" fill="#f2c9b8"/>

      <!-- head -->
      <circle cx="166" cy="86" r="34" fill="#f2c9b8"/>

      <!--hair (dirty blonde)-->
      <path d="M132 90 Q166 15 200 90" stroke="#f2d95c" stroke-width="6" fill="none" stroke-linecap="round"/>
      <path d="M132 96 Q166 21 200 96" stroke="#f2d95c" stroke-width="15" fill="none" stroke-linecap="round"/>

      <!-- face -->
      <circle cx="154" cy="88" r="4" fill="#111"/>
      <circle cx="178" cy="88" r="4" fill="#111"/>
      <path d="M154 104 Q166 114 178 104" stroke="#FF0000" stroke-width="4" fill="none" stroke-linecap="round"/>
    </g>

    <!-- Boy (you) starts OFFSCREEN LEFT and walks in -->
    <g class="boy" transform="translate(-260,40)">
      <!-- legs -->
      <rect x="132" y="210" width="26" height="64" rx="10" fill="#111827"/>
      <rect x="172" y="210" width="26" height="64" rx="10" fill="#111827"/>
      <!-- shoes -->
      <rect x="126" y="268" width="38" height="14" rx="7" fill="#0b0b0b"/>
      <rect x="166" y="268" width="38" height="14" rx="7" fill="#0b0b0b"/>

      <!-- suit body (formal) -->
      <rect x="118" y="118" width="96" height="102" rx="22" fill="#111827"/>
      <!-- shirt -->
      <rect x="150" y="128" width="32" height="60" rx="10" fill="#f8fafc"/>
      <!-- tie -->
      <polygon points="166,134 156,148 166,162 176,148" fill="#ff4d6d"/>
      <rect x="162" y="162" width="8" height="34" rx="4" fill="#ff4d6d"/>

      <!-- arms -->
      <rect x="96" y="134" width="30" height="18" rx="9" fill="#111827"/>
      <rect x="206" y="134" width="30" height="18" rx="9" fill="#111827"/>

      <!-- right forearm -->
      <rect x="218" y="144" width="46" height="16" rx="8" fill="#111827"/>
      <circle cx="270" cy="152" r="10" fill="#8b5e3c"/>

      <!-- head (brown skin) -->
      <circle cx="166" cy="86" r="34" fill="#8b5e3c"/>

      <!-- curly hair (dark) -->
      <g fill="#111827">
        <circle cx="144" cy="66" r="11"/>
        <circle cx="160" cy="58" r="12"/>
        <circle cx="178" cy="58" r="12"/>
        <circle cx="192" cy="66" r="11"/>
        <circle cx="150" cy="76" r="10"/>
        <circle cx="182" cy="76" r="10"/>
      </g>

      <!-- face -->
      <circle cx="154" cy="88" r="4" fill="#111"/>
      <circle cx="178" cy="88" r="4" fill="#111"/>
      <path d="M154 104 Q166 114 178 104" stroke="#111" stroke-width="4" fill="none" stroke-linecap="round"/>

      <!-- Bouquet attached to YOU while walking -->
      <g class="bouquet" transform="translate(288,50)">
        <!-- stems -->
        <rect x="0" y="70" width="10" height="70" rx="5" fill="#2f7a3a"/>
        <rect x="18" y="70" width="10" height="70" rx="5" fill="#2f7a3a"/>
        <rect x="36" y="70" width="10" height="70" rx="5" fill="#2f7a3a"/>
        <!-- roses -->
        <circle cx="5" cy="60" r="16" fill="#ff2e63"/>
        <circle cx="23" cy="54" r="16" fill="#ff2e63"/>
        <circle cx="41" cy="60" r="16" fill="#ff2e63"/>
        <circle cx="5" cy="60" r="7" fill="rgba(255,255,255,.18)"/>
        <circle cx="23" cy="54" r="7" fill="rgba(255,255,255,.18)"/>
        <circle cx="41" cy="60" r="7" fill="rgba(255,255,255,.18)"/>
        <!-- ribbon -->
        <path d="M-10 96 Q24 120 58 96" stroke="#ffe6ef" stroke-width="10" stroke-linecap="round" fill="none"/>
      </g>
    </g>

    <!-- Hearts pop AFTER delivery -->
    <g class="hearts">
      <text x="560" y="120">üíñ</text>
      <text x="600" y="95">üíï</text>
      <text x="642" y="125">üíñ</text>
    </g>
  </svg>
</div>

  <div id="countdownText"></div>
  <div id="ctaSlot"></div>
</div>

<div id="particles"></div>

<!-- Soft instrumental (plays after YES click) -->
<audio id="bgMusic" loop>
  <source src="https://cdn.pixabay.com/audio/2023/02/28/audio_0f1c9b2f3f.mp3" type="audio/mpeg">
</audio>

<script>
  const noBtn = document.getElementById("no");
  const yesBtn = document.getElementById("yes");
  const celebrate = document.getElementById("celebrate");
  const particles = document.getElementById("particles");
  const music = document.getElementById("bgMusic");

  const countdownEl = document.getElementById("countdownText");
  const ctaSlot = document.getElementById("ctaSlot");

  // Apple Music search: "The One" - Kodaline
  const AM_URL = "https://music.apple.com/us/album/the-one/1440903987?i=1440904106";

  let partyLoop = null;
  let countdownTimer = null;
  let typingTimer = null;
  let secondsLeft = 5;

  function clamp(n, min, max){ return Math.max(min, Math.min(max, n)); }

  // UPDATED: NO runs away but never changes size, YES never grows
  function moveNo(){
    const padding = 12;
    const maxX = window.innerWidth - noBtn.offsetWidth - padding;
    const maxY = window.innerHeight - noBtn.offsetHeight - padding;

    let x = Math.random() * maxX;
    let y = Math.random() * maxY;

    // keep it away from the YES button area so it doesn't instantly sit on top of it
    const yesRect = yesBtn.getBoundingClientRect();
    if (
      x > yesRect.left - 80 &&
      x < yesRect.right + 80 &&
      y > yesRect.top - 80 &&
      y < yesRect.bottom + 80
    ){
      x = (x + 200) % maxX;
      y = (y + 200) % maxY;
    }

    noBtn.style.left = x + "px";
    noBtn.style.top  = y + "px";
  }

  // Same triggers as you had
  noBtn.addEventListener("mouseenter", moveNo);
  noBtn.addEventListener("mousedown", moveNo);

  yesBtn.addEventListener("click", () => {
    celebrate.style.display = "flex";
    celebrate.classList.add("playAnim");  // <-- start the couple animation
    noBtn.style.display = "none";

    music.volume = 0.6;
    music.play().catch(()=>{});

    startParty();
    startCountdown();
  });

  function startParty(){
    if (partyLoop) clearInterval(partyLoop);

    burstConfetti(160);
    burstFloaters(40);

    partyLoop = setInterval(() => {
      burstConfetti(40);
      burstFloaters(12);
    }, 700);
  }

  function typeTextOnce(el, text, speed = 18, done){
    if (typingTimer) clearInterval(typingTimer);
    el.textContent = "";
    let i = 0;

    typingTimer = setInterval(() => {
      el.textContent += text[i] ?? "";
      i++;
      if (i >= text.length){
        clearInterval(typingTimer);
        typingTimer = null;
        if (typeof done === "function") done();
      }
    }, speed);
  }

  function startCountdown(){
    if (countdownTimer) clearInterval(countdownTimer);
    ctaSlot.innerHTML = "";
    secondsLeft = 5;

    // typewriter only once
    typeTextOnce(countdownEl, `Opening Apple Music in ${secondsLeft}‚Ä¶`, 18, () => {
      countdownTimer = setInterval(() => {
        secondsLeft--;

        if (secondsLeft > 0){
          countdownEl.textContent = `Opening Apple Music in ${secondsLeft}‚Ä¶`;
        } else {
          clearInterval(countdownTimer);
          countdownTimer = null;
          countdownEl.textContent = "Ready üíñ";
          showAppleMusicButton();
        }
      }, 1000);
    });
  }

  function showAppleMusicButton(){
    if (document.getElementById("amBtn")) return;

    const btn = document.createElement("button");
    btn.id = "amBtn";
    btn.textContent = "üéß Tap to hear our song";
    btn.style.background = "#ff4d6d";
    btn.style.color = "white";
    btn.style.padding = "14px 22px";
    btn.style.border = "none";
    btn.style.borderRadius = "999px";
    btn.style.fontSize = "18px";
    btn.style.cursor = "pointer";
    btn.style.boxShadow = "0 14px 28px rgba(0,0,0,.18)";
    btn.style.transition = "transform 140ms ease, filter 140ms ease";

    // pulse
    let grow = true;
    const pulse = setInterval(() => {
      if (!document.getElementById("amBtn")) { clearInterval(pulse); return; }
      btn.style.transform = grow ? "scale(1.06)" : "scale(1)";
      btn.style.filter = grow ? "brightness(1.08)" : "brightness(1)";
      grow = !grow;
    }, 420);

    btn.addEventListener("click", () => {
      window.location.href = AM_URL;
    });

    ctaSlot.appendChild(btn);
  }

  function burstConfetti(n){
    for (let i=0; i<n; i++){
      const c = document.createElement("div");
      c.className = "confetti";
      c.style.left = (Math.random() * window.innerWidth) + "px";

      const colors = ["#ffffff", "#ff4d6d", "#ffb3c1", "#ffd6e0", "#ffe66d", "#7bdff2", "#b2f7ef"];
      c.style.background = colors[Math.floor(Math.random() * colors.length)];

      const w = 6 + Math.random() * 8;
      const h = 10 + Math.random() * 10;
      c.style.width = w + "px";
      c.style.height = h + "px";

      const duration = 1.6 + Math.random() * 2.2;
      c.style.animationDuration = duration + "s";

      particles.appendChild(c);
      setTimeout(() => c.remove(), duration * 1000 + 300);
    }
  }

  function burstFloaters(n){
    const emojis = ["üíñ","üíï","üåπ","‚ù§Ô∏è"];
    for (let i=0; i<n; i++){
      const f = document.createElement("div");
      f.className = "floater";
      f.textContent = emojis[Math.floor(Math.random() * emojis.length)];
      f.style.left = (Math.random() * window.innerWidth) + "px";
      f.style.top  = (window.innerHeight - 30) + "px";
      f.style.fontSize = (22 + Math.random() * 26) + "px";

      const duration = 1.2 + Math.random() * 1.8;
      f.style.animationDuration = duration + "s";

      particles.appendChild(f);
      setTimeout(() => f.remove(), duration * 1000 + 200);
    }
  }

  // UPDATED: place NO next to YES on load (instead of random)
  function placeNoNextToYes(){
    const yesRect = yesBtn.getBoundingClientRect();
    const gap = 12;
    let left = yesRect.right + gap;
    let top = yesRect.top;

    // If it would go off-screen, put it to the left instead
    if (left + noBtn.offsetWidth > window.innerWidth - 10){
      left = Math.max(10, yesRect.left - gap - noBtn.offsetWidth);
    }

    noBtn.style.left = left + "px";
    noBtn.style.top = top + "px";
  }

  // Wait a tick so layout is measured correctly
  requestAnimationFrame(() => {
    placeNoNextToYes();
  });

  window.addEventListener("resize", () => {
    if (noBtn.style.display !== "none") placeNoNextToYes();
  });
</script>

</body>
</html>

